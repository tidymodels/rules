[{"path":[]},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@posit.co. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://rules.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to rules","title":"Contributing to rules","text":"outlines propose change rules. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to rules","text":"Small typos grammatical errors documentation may edited directly using GitHub web interface, long changes made source file. YES: edit roxygen comment .R file R/. : edit .Rd file man/.","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":"prerequisites","dir":"","previous_headings":"","what":"Prerequisites","title":"Contributing to rules","text":"make substantial pull request, always file issue make sure someone team agrees ’s problem. ’ve found bug, create associated issue illustrate bug minimal reprex.","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"","what":"Pull request process","title":"Contributing to rules","text":"recommend create Git branch pull request (PR). Look Travis AppVeyor build status making changes. README contain badges continuous integration services used package. New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat. Contributions test cases included easier accept. user-facing changes, add bullet top NEWS.md current development version header describing changes made followed GitHub username, links relevant issue(s)/PR(s).","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to rules","text":"Please note rules project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://rules.tidymodels.org/dev/CONTRIBUTING.html","id":"see-tidyverse-development-contributing-guide","dir":"","previous_headings":"","what":"See tidyverse development contributing guide","title":"Contributing to rules","text":"details.","code":""},{"path":"https://rules.tidymodels.org/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 rules authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://rules.tidymodels.org/dev/SUPPORT.html","id":null,"dir":"","previous_headings":"","what":"Getting help with rules","title":"Getting help with rules","text":"Thanks using rules. filing issue, places explore pieces put together make process smooth possible. Start making minimal reproducible example using reprex package. haven’t heard used reprex , ’re treat! Seriously, reprex make R-question-asking endeavors easier (pretty insane ROI five ten minutes ’ll take learn ’s ). additional reprex pointers, check Get help! section tidyverse site. Armed reprex, next step figure ask. ’s question: start community.rstudio.com, /StackOverflow. people answer questions. ’s bug: ’re right place, file issue. ’re sure: let community help figure ! problem bug feature request, can easily return report . opening new issue, sure search issues pull requests make sure bug hasn’t reported /already fixed development version. default, search pre-populated :issue :open. can edit qualifiers (e.g. :pr, :closed) needed. example, ’d simply remove :open search issues repo, open closed. right place, need file issue, please review “File issues” paragraph tidyverse contributing guidelines. Thanks help!","code":""},{"path":"https://rules.tidymodels.org/dev/articles/cubist-and-rulefit.html","id":"both-start-by-making-rules-from-trees","dir":"Articles","previous_headings":"","what":"Both start by making rules from trees","title":"What's the difference between Cubist and RuleFit?","text":"model, initial tree-based model created. Let’s look really simple example tree: case, two predictors used splits: B. model, split left “<” condition. three terminal nodes. tree-based structure can converted set distinct rules. rule collection /statements define path terminal nodes. example: , paths tree mutually exclusive. deep trees, rules can become overly complex may contain redundancies. Cubist takes approach simplifying rules whenever possible (Quinlan (1987)). example, becomes Cubist also approach can prune conditions inside rule simplifies structure without degrading performance. B doesn’t matter much rule , Cubist reduce < 7. Cubist RuleFit also ensemble methods. RuleFit, tree ensemble model generate set rules. xrf package, xgboost package creates initial set rules. rules create tree pooled broader rule set. Cubist takes different approach uses model committees (see APM Chapter 14). similar boosting creates pseudo-outcome tree ensemble. outcome adjusts trees based size residual previous tree. end rule generating process, rules unlikely mutually exclusive. data point likely fall multiple rules. Now let’s look model uses rules.","code":"if (A < a) {   if (B < b) {     node <- 1   } else {     node <- 2   } } else   node <- 3 } rule_1 <- (A <  a) & (B <  b) rule_2 <- (A <  a) & (B >= b) rule_3 <- (A >= a) rule_x <- (A <  10)  & (A <  7) & (B >= 1) rule_y <- (A < 7) & (B >= 1)"},{"path":"https://rules.tidymodels.org/dev/articles/cubist-and-rulefit.html","id":"cubists-makes-a-model-for-each-rule","dir":"Articles","previous_headings":"","what":"Cubists makes a model for each rule","title":"What's the difference between Cubist and RuleFit?","text":"delving rules, let’s start model tree initially created Cubist (Quinlan (1992)). initial tree created regression model created split tree. linear regression created subset data covered current rule uses predictors current rule. tree shown , first split produces two models predictor. data filtered either < >= . entire set models : Cubist feature selection models may contain possible predictors. Also, since Cubist prunes rules, may appear connection variables used rule corresponding model. models associated rules actually average many models tree. Since linear models, models used Cubist rule coefficients averages: equations averaging first described Quinlan (1992) updated equation Cubist can found Chapter 14 APM. model committee rule within committee. predicting, new observation compared conditions rules determine rules active data point. active linear models predict new sample predictions averaged produce final prediction value. Perhaps unrelated document, focuses rules used, Cubist also nearest-neighbor correction predicted values (Quinlan R (1993)). Let’s look example model Palmer penguin data: summary() function shows details rules. Note rule second committee conditions; data points predicted affected rule. Also, possible linear model within rule contain intercept. tidy() function can extract rule model data: estimate statistic columns contain tibbles parameter estimates rule statistics, respectively. can easily expanded using unnest(): first committee, rule four contains two conditions covers 23 data points original data set. can find data points converting character string rule R expression, evaluate expression data set:","code":"split_1_low  <- filter(data, A <  a) model_1_low  <- lm(y ~ A, data = split_1_low)  split_1_high <- filter(data, A >= a) model_1_high <- lm(y ~ A, data = split_1_high)  split_2_low  <- filter(data, A <  a & B <  b) model_2_low  <- lm(y ~ A + B, data = split_2_low)  split_2_high <- filter(data, A <  a & B >= b) model_2_high <- lm(y ~ A + B, data = split_2_high) library(rules) #> Loading required package: parsnip data(penguins, package = \"modeldata\")  cubist_fit <-    cubist_rules(committees = 2) %>%    set_engine(\"Cubist\") %>%    fit(body_mass_g ~ ., data = penguins) cubist_fit #> parsnip model object #>  #>  #> Call: #> cubist.default(x = x, y = y, committees = 2) #>  #> Number of samples: 333  #> Number of predictors: 6  #>  #> Number of committees: 2  #> Number of rules per committee: 5, 1 summary(cubist_fit$fit) #>  #> Call: #> cubist.default(x = x, y = y, committees = 2) #>  #>  #> Cubist [Release 2.07 GPL Edition]  Mon Aug  5 12:43:03 2024 #> --------------------------------- #>  #>     Target attribute `outcome' #>  #> Read 333 cases (7 attributes) from undefined.data #>  #> Model 1: #>  #>   Rule 1/1: [107 cases, mean 3419.2, range 2700 to 4150, est err 208.3] #>  #>     if #>  flipper_length_mm <= 202 #>  sex = female #>     then #>  outcome = -1068 + 108 bill_depth_mm + 10.7 flipper_length_mm #>            + 14 bill_length_mm #>  #>   Rule 1/2: [92 cases, mean 3972.0, range 3250 to 4775, est err 275.6] #>  #>     if #>  flipper_length_mm <= 202 #>  sex = male #>     then #>  outcome = 319.1 + 22.3 flipper_length_mm - 21 bill_length_mm #>            + 12 bill_depth_mm #>  #>   Rule 1/3: [58 cases, mean 4679.7, range 3950 to 5200, est err 206.6] #>  #>     if #>  flipper_length_mm > 202 #>  sex = female #>     then #>  outcome = -3923.3 + 30.4 flipper_length_mm + 136 bill_depth_mm #>            + 5 bill_length_mm #>  #>   Rule 1/4: [23 cases, mean 4698.9, range 3950 to 6050, est err 275.8] #>  #>     if #>  bill_depth_mm > 16.4 #>  flipper_length_mm > 202 #>     then #>  outcome = -7845.8 + 58.6 flipper_length_mm #>  #>   Rule 1/5: [53 cases, mean 5475.0, range 4750 to 6300, est err 239.3] #>  #>     if #>  bill_depth_mm <= 16.4 #>  sex = male #>     then #>  outcome = -138.7 + 46 bill_length_mm + 89 bill_depth_mm #>            + 8.9 flipper_length_mm #>  #> Model 2: #>  #>   Rule 2/1: [333 cases, mean 4207.1, range 2700 to 6300, est err 315.4] #>  #>  outcome = -5815.1 + 49.7 flipper_length_mm #>  #>  #> Evaluation on training data (333 cases): #>  #>     Average  |error|              278.7 #>     Relative |error|               0.41 #>     Correlation coefficient        0.90 #>  #>  #>  Attribute usage: #>    Conds  Model #>  #>     47%           sex #>     42%   100%    flipper_length_mm #>     11%    47%    bill_depth_mm #>            47%    bill_length_mm #>  #>  #> Time: 0.0 secs cb_res <- tidy(cubist_fit) cb_res #> # A tibble: 6 × 5 #>   committee rule_num rule                               estimate statistic #>       <int>    <int> <chr>                              <list>   <list>    #> 1         1        1 ( sex == 'female' ) & ( flipper_l… <tibble> <tibble>  #> 2         1        2 ( sex == 'male' ) & ( flipper_len… <tibble> <tibble>  #> 3         1        3 ( flipper_length_mm > 202 ) & ( s… <tibble> <tibble>  #> 4         1        4 ( flipper_length_mm > 202 ) & ( b… <tibble> <tibble>  #> 5         1        5 ( bill_depth_mm <= 16.4 ) & ( sex… <tibble> <tibble>  #> 6         2        1 <no conditions>                    <tibble> <tibble> library(tidyr) cb_res %>%    dplyr::select(committee, rule_num, statistic) %>%    unnest(cols = c(statistic)) #> # A tibble: 6 × 8 #>   committee rule_num num_conditions coverage  mean   min   max error #>       <int>    <int>          <dbl>    <dbl> <dbl> <dbl> <dbl> <dbl> #> 1         1        1              2      107 3419.  2700  4150  208. #> 2         1        2              2       92 3972   3250  4775  276. #> 3         1        3              2       58 4680.  3950  5200  207. #> 4         1        4              2       23 4699.  3950  6050  276. #> 5         1        5              2       53 5475   4750  6300  239. #> 6         2        1              0      333 4207.  2700  6300  315. library(dplyr) library(purrr) library(rlang)  rule_4_filter <-    cb_res %>%    dplyr::filter(rule_num == 4) %>%    pluck(\"rule\") %>%   # <- character string   parse_expr() %>%    # <- R expression   eval_tidy(penguins) # <- logical vector  penguins %>%    dplyr::slice(which(rule_4_filter)) #> # A tibble: 23 × 7 #>    species island    bill_length_mm bill_depth_mm flipper_length_mm #>    <fct>   <fct>              <dbl>         <dbl>             <int> #>  1 Adelie  Dream               41.1          18.1               205 #>  2 Adelie  Dream               40.8          18.9               208 #>  3 Adelie  Biscoe              41            20                 203 #>  4 Adelie  Torgersen           44.1          18                 210 #>  5 Gentoo  Biscoe              59.6          17                 230 #>  6 Gentoo  Biscoe              44.4          17.3               219 #>  7 Gentoo  Biscoe              49.8          16.8               230 #>  8 Gentoo  Biscoe              50.8          17.3               228 #>  9 Gentoo  Biscoe              52.1          17                 230 #> 10 Gentoo  Biscoe              52.2          17.1               228 #> # ℹ 13 more rows #> # ℹ 2 more variables: body_mass_g <int>, sex <fct>"},{"path":"https://rules.tidymodels.org/dev/articles/cubist-and-rulefit.html","id":"rulefit-makes-one-model-with-rule-predictors","dir":"Articles","previous_headings":"","what":"RuleFit makes one model with rule predictors","title":"What's the difference between Cubist and RuleFit?","text":"RuleFit uses rules straightforward way. creates initial tree (ensemble trees) data. Rules extracted initial model converted set binary features. features added regularized regression model (along original columns). example: common use lasso model regularize model eliminate non-informative features. details can depend implementation, rules appear pruned simplified. tuning parameters model inherits parameter tree-based model well amount regularization used glmnet model. complexity rules determined allowed depth tree. example, using depth four means rule may four terms define . number rules primarily determined number boosting iterations. RuleFit, implemented xrf package, required data complete (.e, non-missing). original data set, body mass encoded integer xrf requires double, : Fitting model: get rules associated coefficients, tidy() method can used : Note units predictor scaled zero one. Looking rules, examples rules, : can simplified fewer conditions: Also, tidy() function can extract information use original predictors unit: single rule might represented multiple rows version data. results can also used compute rough estimate variable importance using absolute value coefficients:","code":"data_with_rules <-    data %>%    mutate(     rule_1 = ifelse(A <  a & B <  b, 0, 1),     rule_2 = ifelse(A <  a & B >= b, 0, 1),     rule_2 = ifelse(A >= a,          0, 1)   )  rule_fit_model <-    glmnet(x = data_with_rules %>% select(A, B, starts_with(\"rule_\") %>% as.matrix(),          y = data_with_rules$y,          alpha = 1) penguins <-    penguins %>%    mutate(body_mass_g = body_mass_g + 0.0) %>%    na.omit() rule_fit_spec <-    rule_fit(trees = 10, tree_depth = 5, penalty = 0.01) %>%    set_engine(\"xrf\") %>%   set_mode(\"regression\")   rule_fit_fit <-    rule_fit_spec %>%    fit(body_mass_g ~ ., data = penguins) rule_fit_fit #> parsnip model object #>  #> An eXtreme RuleFit model of 112 rules. #>  #> Original Formula: #>  #> body_mass_g ~ species + island + bill_length_mm + bill_depth_mm + [truncated] rf_res <- tidy(rule_fit_fit, penalty = 0.01) rf_res #> # A tibble: 110 × 3 #>    rule_id           rule                                         estimate #>    <chr>             <chr>                                           <dbl> #>  1 (Intercept)       ( TRUE )                                      5753.   #>  2 bill_depth_mm     ( bill_depth_mm )                              -15.9  #>  3 bill_length_mm    ( bill_length_mm )                               1.10 #>  4 flipper_length_mm ( flipper_length_mm )                           -7.67 #>  5 islandDream       ( island == 'Dream' )                          -29.2  #>  6 islandTorgersen   ( island == 'Torgersen' )                      -16.8  #>  7 r0_2              ( species == 'Gentoo' )                        472.   #>  8 r0_3              ( sex != 'male' ) & ( species != 'Gentoo' )    -78.8  #>  9 r1_2              ( flipper_length_mm >= 211.5 )                 219.   #> 10 r1_3              ( flipper_length_mm <  194.5 ) & ( flipper_…  -142.   #> # ℹ 100 more rows ( bill_depth_mm >= 14.1499996 ) &  ( flipper_length_mm <  227 ) &  ( flipper_length_mm <  228.5 ) &  ( flipper_length_mm >= 197.5 ) &  ( flipper_length_mm >= 224.5 )\" ( bill_depth_mm >= 14.1499996 ) &  ( flipper_length_mm <  227 ) &  ( flipper_length_mm >= 197.5 ) & rf_variable_res <- tidy(rule_fit_fit, unit = \"columns\", penalty = 0.01) rf_variable_res #> # A tibble: 452 × 3 #>    rule_id term              estimate #>    <chr>   <chr>                <dbl> #>  1 r0_3    species             -78.8  #>  2 r0_2    species             472.   #>  3 r0_3    sex                 -78.8  #>  4 r1_3    flipper_length_mm  -142.   #>  5 r1_2    flipper_length_mm   219.   #>  6 r1_3    flipper_length_mm  -142.   #>  7 r2_7    flipper_length_mm     9.04 #>  8 r2_7    sex                   9.04 #>  9 r2_7    species               9.04 #> 10 r3_3    flipper_length_mm  -101.   #> # ℹ 442 more rows num_rules <- sum(grepl(\"^r[0-9]*_\", unique(rf_res$rule_id))) + 1  rf_variable_res %>%    dplyr::filter(term != \"(Intercept)\") %>%    group_by(term) %>%    summarize(effect = sum(abs(estimate)), .groups = \"drop\") %>%    ungroup() %>%    # normalize by number of possible occurrences   mutate(effect = effect / num_rules ) %>%    arrange(desc(effect)) #> # A tibble: 6 × 2 #>   term              effect #>   <chr>              <dbl> #> 1 flipper_length_mm 219.   #> 2 bill_depth_mm     175.   #> 3 bill_length_mm    175.   #> 4 species            69.5  #> 5 sex                52.0  #> 6 island              9.84"},{"path":"https://rules.tidymodels.org/dev/articles/cubist-and-rulefit.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"What's the difference between Cubist and RuleFit?","text":"Quinlan R (1987). “Simplifying Decision Trees.” International Journal Man-Machine Studies, 27(3), 221-234. Quinlan R (1992). “Learning Continuous Classes.” Proceedings 5th Australian Joint Conference Artificial Intelligence, pp. 343-348. Quinlan R (1993). “Combining Instance-Based Model-Based Learning.” Proceedings Tenth International Conference Machine Learning, pp. 236-243.","code":""},{"path":"https://rules.tidymodels.org/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Emil Hvitfeldt. Author, maintainer. Max Kuhn. Author. . Copyright holder, funder.","code":""},{"path":"https://rules.tidymodels.org/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Hvitfeldt E, Kuhn M (2024). rules: Model Wrappers Rule-Based Models. R package version 1.0.2.9000, https://rules.tidymodels.org/, https://github.com/tidymodels/rules.","code":"@Manual{,   title = {rules: Model Wrappers for Rule-Based Models},   author = {Emil Hvitfeldt and Max Kuhn},   year = {2024},   note = {R package version 1.0.2.9000, https://rules.tidymodels.org/},   url = {https://github.com/tidymodels/rules}, }"},{"path":[]},{"path":"https://rules.tidymodels.org/dev/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"Model Wrappers for Rule-Based Models","text":"rules parsnip extension package model definitions rule-based models, including: cubist models discrete rule sets contain linear models ensemble method similar boosting classification rules ruleset derived initial tree fit rule-fit models begin rules extracted tree ensemble added regularized linear logistic regression.","code":""},{"path":"https://rules.tidymodels.org/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Model Wrappers for Rule-Based Models","text":"can install released version rules CRAN : Install development version GitHub :","code":"install.packages(\"rules\") # install.packages(\"pak\") pak::pak(\"tidymodels/rules\")"},{"path":"https://rules.tidymodels.org/dev/index.html","id":"available-engines","dir":"","previous_headings":"","what":"Available Engines","title":"Model Wrappers for Rule-Based Models","text":"rules package provides engines models following table.","code":""},{"path":"https://rules.tidymodels.org/dev/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Model Wrappers for Rule-Based Models","text":"project released Contributor Code Conduct. contributing project, agree abide terms. questions discussions tidymodels packages, modeling, machine learning, please post RStudio Community. think encountered bug, please submit issue. Either way, learn create share reprex (minimal, reproducible example), clearly communicate code. Check details contributing guidelines tidymodels packages get help.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/committees.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameter functions for Cubist models — committees","title":"Parameter functions for Cubist models — committees","text":"Committee-based models enact boosting-like procedure produce ensembles. committees parameter number models ensembles max_rules can used limit number possible rules.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/committees.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameter functions for Cubist models — committees","text":"","code":"committees(range = c(1L, 100L), trans = NULL)  max_rules(range = c(1L, 500L), trans = NULL)"},{"path":"https://rules.tidymodels.org/dev/reference/committees.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameter functions for Cubist models — committees","text":"range two-element vector holding defaults smallest largest possible values, respectively. trans trans object scales package, scales::log10_trans() scales::reciprocal_trans(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/committees.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameter functions for Cubist models — committees","text":"function classes \"quant_param\" \"param\"","code":""},{"path":"https://rules.tidymodels.org/dev/reference/committees.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameter functions for Cubist models — committees","text":"","code":"committees() #> # Committees (quantitative) #> Range: [1, 100] committees(4:5) #> # Committees (quantitative) #> Range: [4, 5]  max_rules() #> Max. Rules (quantitative) #> Range: [1, 500]"},{"path":"https://rules.tidymodels.org/dev/reference/multi_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"multi_predict() methods for rule-based models — multi_predict._cubist","title":"multi_predict() methods for rule-based models — multi_predict._cubist","text":"multi_predict() methods rule-based models","code":""},{"path":"https://rules.tidymodels.org/dev/reference/multi_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"multi_predict() methods for rule-based models — multi_predict._cubist","text":"","code":"# S3 method for class '`_cubist`' multi_predict(object, new_data, type = NULL, neighbors = NULL, ...)  # S3 method for class '`_xrf`' multi_predict(object, new_data, type = NULL, penalty = NULL, ...)"},{"path":"https://rules.tidymodels.org/dev/reference/multi_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"multi_predict() methods for rule-based models — multi_predict._cubist","text":"object model_fit object. new_data rectangular data object, data frame. type single character value NULL. argument ignored method _cubist objects handled internally (since type = \"numeric\" always used). neighbors numeric vector neighbors values zero nine. ... currently used. penalty Non-negative penalty values.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. dials mtry_prop generics tidy, tunable parsnip multi_predict","code":""},{"path":"https://rules.tidymodels.org/dev/reference/rules-internal.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function wrappers — c5_fit","title":"Internal function wrappers — c5_fit","text":"supported called user.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/rules-internal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function wrappers — c5_fit","text":"","code":"c5_fit(x, y, trials = 1, minCases = 2, cost = NULL, ...)  c5_pred(object, new_data, trials = object$fit$trials[\"Actual\"], ...)  # S3 method for class 'C5_rules' tunable(x, ...)  cubist_fit(x, y, committees = 1, neighbors = 0, max_rules = NA, ...)  get_neighbors(x)  # S3 method for class 'cubist_rules' tunable(x, ...)  xrf_fit(   formula,   data,   max_depth = 6,   nrounds = 15,   eta = 0.3,   colsample_bynode = NULL,   colsample_bytree = NULL,   min_child_weight = 1,   gamma = 0,   subsample = 1,   validation = 0,   early_stop = NULL,   counts = TRUE,   event_level = c(\"first\", \"second\"),   lambda = 0.1,   ... )  xrf_pred(object, new_data, lambda = object$fit$lambda, type, ...)  # S3 method for class 'rule_fit' tunable(x, ...)"},{"path":"https://rules.tidymodels.org/dev/reference/rules-package.html","id":null,"dir":"Reference","previous_headings":"","what":"rules: Model Wrappers for Rule-Based Models — rules-package","title":"rules: Model Wrappers for Rule-Based Models — rules-package","text":"Bindings additional models use 'parsnip' package. Models include prediction rule ensembles (Friedman Popescu, 2008) doi:10.1214/07-AOAS148 , C5.0 rules (Quinlan, 1992 ISBN: 1558602380), Cubist (Kuhn Johnson, 2013) doi:10.1007/978-1-4614-6849-3 .","code":""},{"path":[]},{"path":"https://rules.tidymodels.org/dev/reference/rules-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rules: Model Wrappers for Rule-Based Models — rules-package","text":"Maintainer: Emil Hvitfeldt emil.hvitfeldt@posit.co (ORCID) Authors: Max Kuhn max@posit.co (ORCID) contributors: Posit Software, PBC [copyright holder, funder]","code":""},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":null,"dir":"Reference","previous_headings":"","what":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":"Turn C5.0 rule-based models tidy tibbles","code":""},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":"","code":"# S3 method for class 'C5.0' tidy(x, trees = x$trials[\"Actual\"], ...)  # S3 method for class 'cubist' tidy(x, committees = x$committee, ...)  # S3 method for class 'xrf' tidy(x, penalty = NULL, unit = c(\"rules\", \"columns\"), ...)"},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":"x Cubist, C5.0, xrf object. trees number boosting iterations tidy (defaults entire ensemble). ... currently used. committees number committees tidy (defaults entire ensemble). penalty single numeric value lambda penalty value. unit data returned? unit = 'rules', row corresponds rule. unit = 'columns', row predictor column. latter can helpful determining variable importance.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":"outputs tidy functions different since model structures different. Let’s look Cubist RuleFit first, using Ames data, C5.0 different data set.","code":""},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":"an-example-using-the-ames-data","dir":"Reference","previous_headings":"","what":"An example using the Ames data","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":"First fit Cubist model tidy :     Since Cubist fits linear regressions within data rule, coefficients estimate column information statistic:         Note can get data rule using rlang::parse_expr() :     use get data back:     Now let’s fit RuleFit model. First, ’ll use recipe convert Central Air predictor indicator:     , focus model coefficients produced glmnet. can also break results sort original predictor columns:","code":"library(tidymodels) library(rules) library(rlang)  data(ames, package = \"modeldata\")  ames <- ames %>%   mutate(Sale_Price = log10(Sale_Price)) %>%   select(Sale_Price, Longitude, Latitude, Central_Air)  cb_fit <-   cubist_rules(committees = 10) %>%   set_engine(\"Cubist\") %>%   fit(Sale_Price ~ ., data = ames)  cb_res <- tidy(cb_fit)  cb_res ## # A tibble: 223 x 5 ##    committee rule_num rule                                    estimate statistic ##        <int>    <int> <chr>                                   <list>   <list> ##  1         1        1 ( Central_Air == 'N' ) & ( Latitude <=~ <tibble> <tibble> ##  2         1        2 ( Latitude <= 41.992611 ) & ( Latitude~ <tibble> <tibble> ##  3         1        3 ( Central_Air == 'N' ) & ( Latitude > ~ <tibble> <tibble> ##  4         1        4 ( Latitude <= 42.026997 ) & ( Longitud~ <tibble> <tibble> ##  5         1        5 ( Longitude > -93.63002 ) & ( Latitude~ <tibble> <tibble> ##  6         1        6 ( Latitude <= 42.035858 ) & ( Longitud~ <tibble> <tibble> ##  7         1        7 ( Latitude <= 42.024029 ) & ( Latitude~ <tibble> <tibble> ##  8         1        8 ( Longitude > -93.602348 ) & ( Latitud~ <tibble> <tibble> ##  9         1        9 ( Latitude <= 41.991756 ) & ( Longitud~ <tibble> <tibble> ## 10         1       10 ( Latitude > 42.041813 ) & ( Longitude~ <tibble> <tibble> ## # i 213 more rows cb_res$estimate[[1]] ## # A tibble: 3 x 2 ##   term        estimate ##   <chr>          <dbl> ## 1 (Intercept)  -509. ## 2 Longitude      -5.05 ## 3 Latitude        0.99 cb_res$statistic[[1]] ## # A tibble: 1 x 6 ##   num_conditions coverage  mean   min   max error ##            <dbl>    <dbl> <dbl> <dbl> <dbl> <dbl> ## 1              3       38  4.87  4.12  5.22 0.149 rule_1_expr <- parse_expr(cb_res$rule[1]) rule_1_expr ## (Central_Air == \"N\") & (Latitude <= 42.026997) & (Longitude > ##     -93.639572) filter(ames, !!rule_1_expr) ## # A tibble: 38 x 4 ##    Sale_Price Longitude Latitude Central_Air ##         <dbl>     <dbl>    <dbl> <fct> ##  1       5.04     -93.6     42.0 N ##  2       4.74     -93.6     42.0 N ##  3       4.75     -93.6     42.0 N ##  4       4.54     -93.6     42.0 N ##  5       4.64     -93.6     42.0 N ##  6       5.22     -93.6     42.0 N ##  7       4.80     -93.6     42.0 N ##  8       4.99     -93.6     42.0 N ##  9       5.09     -93.6     42.0 N ## 10       4.89     -93.6     42.0 N ## # i 28 more rows xrf_reg_mod <-   rule_fit(trees = 3, penalty = .001) %>%   set_engine(\"xrf\") %>%   set_mode(\"regression\") # Make dummy variables since xgboost will not  ames_rec <-   recipe(Sale_Price ~ ., data = ames) %>%   step_dummy(Central_Air) %>%   step_zv(all_predictors())  ames_processed <- prep(ames_rec) %>% bake(new_data = NULL)  xrf_reg_fit <-   xrf_reg_mod %>%   fit(Sale_Price ~ ., data = ames_processed)  xrf_rule_res <- tidy(xrf_reg_fit, penalty = .001)  xrf_rule_res ## # A tibble: 8 x 3 ##   rule_id       rule                                                    estimate ##   <chr>         <chr>                                                      <dbl> ## 1 (Intercept)   ( TRUE )                                                 16.4 ## 2 Central_Air_Y ( Central_Air_Y )                                         0.0567 ## 3 Latitude      ( Latitude )                                             -0.424 ## 4 Longitude     ( Longitude )                                            -0.0694 ## 5 r1_1          ( Longitude <  -93.6299744 )                              0.102 ## 6 r2_3          ( Central_Air_Y <  0.5 ) & ( Latitude <  42.0460129 )    -0.136 ## 7 r2_5          ( Latitude >= 42.0460129 ) & ( Longitude <  -93.650901~   0.302 ## 8 r2_6          ( Latitude >= 42.0460129 ) & ( Longitude >= -93.650901~   0.0853 tidy(xrf_reg_fit, penalty = .001, unit = \"columns\") ## # A tibble: 11 x 3 ##    rule_id       term          estimate ##    <chr>         <chr>            <dbl> ##  1 r1_1          Longitude       0.102 ##  2 r2_3          Latitude       -0.136 ##  3 r2_5          Latitude        0.302 ##  4 r2_6          Latitude        0.0853 ##  5 r2_3          Central_Air_Y  -0.136 ##  6 r2_5          Longitude       0.302 ##  7 r2_6          Longitude       0.0853 ##  8 (Intercept)   (Intercept)    16.4 ##  9 Longitude     Longitude      -0.0694 ## 10 Latitude      Latitude       -0.424 ## 11 Central_Air_Y Central_Air_Y   0.0567"},{"path":"https://rules.tidymodels.org/dev/reference/tidy.cubist.html","id":"c-classification-models","dir":"Reference","previous_headings":"","what":"C5.0 classification models","title":"Turn C5.0 and rule-based models into tidy tibbles — tidy.C5.0","text":", ’ll use Palmer penguin data:   First, let’s fit boosted rule-based model tidy:         Tree-based models can also tidied. Rather saving results recursive tree structure, can show paths terminal nodes (just rule). Let’s fit model tidy:         Note C5.0 models can fractional estimates counts terminal nodes.","code":"data(penguins, package = \"modeldata\")  penguins <- drop_na(penguins) rule_model <-   C5_rules(trees = 3) %>%   fit(island ~ ., data = penguins)  rule_info <- tidy(rule_model)  rule_info ## # A tibble: 25 x 4 ##    trial rule_num rule                                                 statistic ##    <int>    <int> <chr>                                                <list> ##  1     1        1 ( bill_length_mm > 37.5 )                            <tibble> ##  2     1        2 ( species == 'Chinstrap' )                           <tibble> ##  3     1        3 ( body_mass_g > 3200 ) & ( body_mass_g < 3700 ) & (~ <tibble> ##  4     1        4 ( flipper_length_mm < 193 )                          <tibble> ##  5     1        5 ( species == 'Adelie' ) & ( bill_length_mm > 38.299~ <tibble> ##  6     1        6 ( bill_length_mm < 40.799999 ) & ( bill_depth_mm > ~ <tibble> ##  7     1        7 ( species == 'Adelie' ) & ( bill_length_mm > 41.599~ <tibble> ##  8     1        8 ( species == 'Adelie' ) & ( bill_depth_mm > 18.9 ) ~ <tibble> ##  9     2        1 ( species == 'Gentoo' )                              <tibble> ## 10     2        2 ( body_mass_g > 3700 ) & ( sex == 'female' )         <tibble> ## # i 15 more rows # The statistic column has the pre-computed data about the # data covered by the rule: rule_info$statistic[[1]] ## # A tibble: 1 x 4 ##   num_conditions coverage  lift class ##            <dbl>    <dbl> <dbl> <chr> ## 1              1      286  1.10 Biscoe tree_model <-   boost_tree(trees = 3) %>%   set_engine(\"C5.0\") %>%   set_mode(\"classification\") %>%   fit(island ~ ., data = penguins)  tree_info <- tidy(tree_model)  tree_info ## # A tibble: 34 x 4 ##    trial  node rule                                                    statistic ##    <int> <int> <chr>                                                   <list> ##  1     1     1 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  2     1     2 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  3     1     3 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  4     1     4 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  5     1     5 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  6     1     6 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  7     1     7 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"female\\\" ~ <tibble> ##  8     1     8 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"male\\\" ) ~ <tibble> ##  9     1     9 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"male\\\" ) ~ <tibble> ## 10     1    10 \"( species %in% c(\\\"Adelie\\\") ) & ( sex == \\\"male\\\" ) ~ <tibble> ## # i 24 more rows # The statistic column has the class breakdown: tree_info$statistic[[1]] ## # A tibble: 3 x 2 ##   value     count ##   <chr>     <dbl> ## 1 Biscoe        3 ## 2 Dream         1 ## 3 Torgersen     0"},{"path":[]},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-102","dir":"Changelog","previous_headings":"","what":"rules 1.0.2","title":"rules 1.0.2","text":"CRAN release: 2023-03-08 Updated Authors@R.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-101","dir":"Changelog","previous_headings":"","what":"rules 1.0.1","title":"rules 1.0.1","text":"CRAN release: 2023-01-17 tidy() method RuleFit models using penalty value. corrected single penalty value required using function. (#66) Fixed bug predict sometimes didn’t work xrf models. C50 tree tidy() method works threes showing terminal nodes rules.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-100","dir":"Changelog","previous_headings":"","what":"rules 1.0.0","title":"rules 1.0.0","text":"CRAN release: 2022-06-23 tidy() method Cubist models now option many committees tidy. Added tidy() method C5.0 rule-based models. mtry_prop parameter moved dials package now re-exported backward compatibility. bug fixed related multi_predict() C5.0 rule-based models (#49). mtry argument now mapped colsample_bynode rather colsample_bytree. consistent parsnip’s interface xgboost parsnip 0.1.6. colsample_bytree can still optimized passing engine argument set_engine() (#60). Introduced support early stopping rule_fit() via stop_iter argument. See parsnip::details_rule_fit_xrf. Note main argument rule_fit() requiring parsnip 1.0.0.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-020","dir":"Changelog","previous_headings":"","what":"rules 0.2.0","title":"rules 0.2.0","text":"CRAN release: 2022-03-14 Model definition functions (e.g. cubist_rules()) moved parsnip package.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-012","dir":"Changelog","previous_headings":"","what":"rules 0.1.2","title":"rules 0.1.2","text":"CRAN release: 2021-08-07 Maintenance release demanded CRAN.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-011","dir":"Changelog","previous_headings":"","what":"rules 0.1.1","title":"rules 0.1.1","text":"CRAN release: 2021-01-16 Added tidy() methods cubist RuleFit models get back rules model coefficients. Clean tunable() methods define default parameter ranges tuning parameters. Changes test cases CRAN get xgboost work Solaris configuration. Case weights enabled [C5_rules()] [cubist_rules()].","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-010","dir":"Changelog","previous_headings":"","what":"rules 0.1.0","title":"rules 0.1.0","text":"CRAN release: 2020-10-28 default encoding methods changed parsnip respect encoding underlying model uses.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-003","dir":"Changelog","previous_headings":"","what":"rules 0.0.3","title":"rules 0.0.3","text":"CRAN release: 2020-10-02 Documentation changes (demanded CRAN). Changes make rules work well PSOCK cluster parallelism.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-002","dir":"Changelog","previous_headings":"","what":"rules 0.0.2","title":"rules 0.0.2","text":"CRAN release: 2020-06-10 Changes new dplyr version.","code":""},{"path":"https://rules.tidymodels.org/dev/news/index.html","id":"rules-001","dir":"Changelog","previous_headings":"","what":"rules 0.0.1","title":"rules 0.0.1","text":"CRAN release: 2020-05-20 First CRAN release","code":""}]
